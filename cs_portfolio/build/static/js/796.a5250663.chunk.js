"use strict";(self.webpackChunkalgorithm_visualizer=self.webpackChunkalgorithm_visualizer||[]).push([[796],{8796:(t,e,n)=>{n.r(e),n.d(e,{encodeIntoResult:()=>h,stegaEncodeSourceMap:()=>b,stegaEncodeSourceMap$1:()=>U});var r=n(9379),o=n(6490);const c=/_key\s*==\s*['"](.*)['"]/;function a(t){if(!Array.isArray(t))throw new Error("Path is not an array");return t.reduce(((t,e,n)=>{const r=typeof e;if("number"===r)return"".concat(t,"[").concat(e,"]");if("string"===r)return"".concat(t).concat(0===n?"":".").concat(e);if(function(t){return"string"==typeof t?c.test(t.trim()):"object"==typeof t&&"_key"in t}(e)&&e._key)return"".concat(t,'[_key=="').concat(e._key,'"]');if(Array.isArray(e)){const[n,r]=e;return"".concat(t,"[").concat(n,":").concat(r,"]")}throw new Error("Unsupported path segment `".concat(JSON.stringify(e),"`"))}),"")}const i={"\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","'":"\\'","\\":"\\\\"},s={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t","\\'":"'","\\\\":"\\"};function l(t){const e=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let r;for(;null!==(r=n.exec(t));)if(void 0===r[1])if(void 0===r[2])if(void 0===r[3]);else{const t=r[3].replace(/\\(\\')/g,(t=>s[t]));e.push({_key:t,_index:-1})}else e.push(parseInt(r[2],10));else{const t=r[1].replace(/\\(\\|f|n|r|t|')/g,(t=>s[t]));e.push(t)}return e}function u(t){return t.map((t=>{if("string"==typeof t||"number"==typeof t)return t;if(""!==t._key)return{_key:t._key};if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))}))}function p(t,e){if(null===e||void 0===e||!e.mappings)return;const n=function(t){return"$".concat(t.map((t=>"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,(t=>i[t])),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,(t=>i[t])),"')]"):"[".concat(t._index,"]"))).join(""))}(t.map((t=>{if("string"==typeof t||"number"==typeof t)return t;if(-1!==t._index)return t._index;throw new Error("invalid segment:".concat(JSON.stringify(t)))})));if(void 0!==e.mappings[n])return{mapping:e.mappings[n],matchedPath:n,pathSuffix:""};const r=Object.entries(e.mappings).filter((t=>{let[e]=t;return n.startsWith(e)})).sort(((t,e)=>{let[n]=t,[r]=e;return r.length-n.length}));if(0==r.length)return;const[o,c]=r[0];return{mapping:c,matchedPath:o,pathSuffix:n.substring(o.length)}}function d(t){return"object"==typeof t&&null!==t}function f(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(function(t){return null!==t&&Array.isArray(t)}(t))return t.map(((t,r)=>{if(d(t)){const o=t._key;if("string"==typeof o)return f(t,e,n.concat({_key:o,_index:r}))}return f(t,e,n.concat(r))}));if(d(t)){if("block"===t._type||"span"===t._type){const o=(0,r.A)({},t);return"block"===t._type?o.children=f(t.children,e,n.concat("children")):"span"===t._type&&(o.text=f(t.text,e,n.concat("text"))),o}return Object.fromEntries(Object.entries(t).map((t=>{let[r,o]=t;return[r,f(o,e,n.concat(r))]})))}return e(t,n)}function h(t,e,n){return f(t,((t,r)=>{if("string"!=typeof t)return t;const o=p(r,e);if(!o)return t;const{mapping:c,matchedPath:a}=o;if("value"!==c.type||"documentValue"!==c.source.type)return t;const i=e.documents[c.source.document],s=e.paths[c.source.path],u=l(a),d=l(s).concat(r.slice(u.length));return n({sourcePath:d,sourceDocument:i,resultPath:r,value:t})}))}const g="drafts.";function y(t){const{baseUrl:e,workspace:n="default",tool:r="default",id:o,type:c,path:i,projectId:s,dataset:l}=t;if(!e)throw new Error("baseUrl is required");if(!i)throw new Error("path is required");if(!o)throw new Error("id is required");if("/"!==e&&e.endsWith("/"))throw new Error("baseUrl must not end with a slash");const p="default"===n?void 0:n,d="default"===r?void 0:r,f=function(t){return t.startsWith(g)?t.slice(g.length):t}(o),h=Array.isArray(i)?a(u(i)):i,y=new URLSearchParams({baseUrl:e,id:f,type:c,path:h});p&&y.set("workspace",p),d&&y.set("tool",d),s&&y.set("projectId",s),l&&y.set("dataset",l),o.startsWith(g)&&y.set("isDraft","");const m=["/"===e?"":e];p&&m.push(p);const v=["mode=presentation","id=".concat(f),"type=".concat(c),"path=".concat(encodeURIComponent(h))];return d&&v.push("tool=".concat(d)),m.push("intent","edit","".concat(v.join(";"),"?").concat(y)),m.join("/")}const m=t=>{let{sourcePath:e,resultPath:n,value:r}=t;if(/^\d{4}-\d{2}-\d{2}/.test(o=r)&&Date.parse(o)||function(t){try{new URL(t,t.startsWith("/")?"https://acme.com":void 0)}catch(e){return!1}return!0}(r))return!1;var o;const c=e.at(-1);return!("slug"===e.at(-2)&&"current"===c||"string"==typeof c&&(c.startsWith("_")||c.endsWith("Id"))||e.some((t=>"meta"===t||"metadata"===t||"openGraph"===t||"seo"===t))||_(e)||_(n)||"string"==typeof c&&v.has(c))},v=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]);function _(t){return t.some((t=>"string"==typeof t&&null!==t.match(/type/i)))}const k=20;function b(t,e,n){var a;const{filter:i,logger:s,enabled:l}=n;if(!l){var u;const r="config.enabled must be true, don't call this function otherwise";throw null!==s&&void 0!==s&&null!==(u=s.error)&&void 0!==u&&u.call(s,"[@sanity/client]: ".concat(r),{result:t,resultSourceMap:e,config:n}),new TypeError(r)}if(!e)return null!==s&&void 0!==s&&null!==(a=s.error)&&void 0!==a&&a.call(s,"[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:e,config:n}),t;if(!n.studioUrl){var p;const r="config.studioUrl must be defined";throw null!==s&&void 0!==s&&null!==(p=s.error)&&void 0!==p&&p.call(s,"[@sanity/client]: ".concat(r),{result:t,resultSourceMap:e,config:n}),new TypeError(r)}const d={encoded:[],skipped:[]},f=h(t,e,(t=>{let{sourcePath:e,sourceDocument:c,resultPath:a,value:l}=t;if(!1===("function"==typeof i?i({sourcePath:e,resultPath:a,filterDefault:m,sourceDocument:c,value:l}):m({sourcePath:e,resultPath:a,filterDefault:m,sourceDocument:c,value:l})))return s&&d.skipped.push({path:w(e),value:"".concat(l.slice(0,k)).concat(l.length>k?"...":""),length:l.length}),l;s&&d.encoded.push({path:w(e),value:"".concat(l.slice(0,k)).concat(l.length>k?"...":""),length:l.length});const{baseUrl:u,workspace:p,tool:f}=function(t){let e="string"==typeof t?t:t.baseUrl;return"/"!==e&&(e=e.replace(/\/$/,"")),"string"==typeof t?{baseUrl:e}:(0,r.A)((0,r.A)({},t),{},{baseUrl:e})}("function"==typeof n.studioUrl?n.studioUrl(c):n.studioUrl);if(!u)return l;const{_id:h,_type:g,_projectId:v,_dataset:_}=c;return(0,o.C)(l,{origin:"sanity.io",href:y((0,r.A)({baseUrl:u,workspace:p,tool:f,id:h,type:g,path:e},!n.omitCrossDatasetReferenceData&&{dataset:_,projectId:v}))},!1)}));if(s){var g,v,_,b,U;const t=d.skipped.length,e=d.encoded.length;if((t||e)&&(null!==(g=(null===s||void 0===s?void 0:s.groupCollapsed)||s.log)&&void 0!==g&&g("[@sanity/client]: Encoding source map into result"),null!==(v=s.log)&&void 0!==v&&v.call(s,"[@sanity/client]: Paths encoded: ".concat(d.encoded.length,", skipped: ").concat(d.skipped.length))),d.encoded.length>0&&(null!==s&&void 0!==s&&null!==(_=s.log)&&void 0!==_&&_.call(s,"[@sanity/client]: Table of encoded paths"),null!==(b=(null===s||void 0===s?void 0:s.table)||s.log)&&void 0!==b&&b(d.encoded)),d.skipped.length>0){var x;const t=new Set;for(const{path:e}of d.skipped)t.add(e.replace(c,"0").replace(/\[\d+\]/g,"[]"));null===s||void 0===s||null===(x=s.log)||void 0===x||x.call(s,"[@sanity/client]: List of skipped paths",[...t.values()])}(t||e)&&(null===s||void 0===s||null===(U=s.groupEnd)||void 0===U||U.call(s))}return f}function w(t){return a(u(t))}var U=Object.freeze({__proto__:null,stegaEncodeSourceMap:b})}}]);
//# sourceMappingURL=796.a5250663.chunk.js.map